<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
<title>参加者</title>
<include file="Public/header"/>
<script src="__HOME_JS__/iscroll-probe.js"></script>
<script>
var myScroll;
var pullDownFlag,pullUpFlag;
var pullDown,pullUp;
var spinner;
function positionJudge(){
    if(this.y>40){    //判断下拉
        pullDown.innerHTML = "放开刷新页面";
        pullDownFlag = 1;
    }else if(this.y<(this.maxScrollY-40)){   //判断上拉
        pullUp.innerHTML = "加载页面";
        pullUpFlag = 1;
    }
}
function action(){
    if(pullDownFlag==1){
        pullDownAction();
        pullDown.innerHTML = "下拉加载页面…";
        pullDownFlag = 0;
    }else if(pullUpFlag==1){
        pullUpAction();
        pullUp.innerHTML = "上拉刷新…";
        pullUpFlag = 0;
    }
}
function loaded(){
    pullDownFlag = 0;
    pullUpFlag = 0;
    pullDown = document.getElementById("pullDown");
    pullUp = document.getElementById("pullUp");
    spinner = document.getElementById("spinner");
    myScroll = new IScroll("#wrapper",{
        probeType: 3,
//        momentum: false,//关闭惯性滑动
        mouseWheel: true,//鼠标滑轮开启
        scrollbars: true,//滚动条可见
        fadeScrollbars: true,//滚动条渐隐
        interactiveScrollbars: true,//滚动条可拖动
        shrinkScrollbars: 'scale', // 当滚动边界之外的滚动条是由少量的收缩
        useTransform: true,//CSS转化
        useTransition: true,//CSS过渡
        bounce: true,//反弹
        freeScroll: false,//只能在一个方向上滑动
        startX: 0,
        startY: 0,
//        snap: "li",//以 li 为单位
    });
    myScroll.on('scroll',positionJudge);
    myScroll.on("scrollEnd",action);
}
function pullDownAction(){
    spinner.style.display = "block";
    setTimeout(function(){
        spinner.style.display = "none";
        myScroll.refresh();
    },1000);
}
function pullUpAction(){
    spinner.style.display = "block";
    setTimeout(function(){
        spinner.style.display = "none";
        myScroll.refresh();
    },1000);
}
function updatePosition(){
pullDown.innerHTML = this.y>>0;
}
document.addEventListener('touchmove', function (e) {
    e.preventDefault();
}, false);
document.addEventListener('touchmove', function (e) {
    e.preventDefault();
}, false);
myScroll.on('scroll',positionJudge);
myScroll.on("scrollEnd",action);
</script>

</head>
<body onload="loaded()">

<div id="wrapper">
  <div id="scroller" class="">
    <div id="pullDown"> <span>下拉刷新…</span> </div>
    <ul id="list" style="padding-bottom:1rem;">
      <li>
        <div class="pro-upuser zanle"><a href="#"><img src="__HOME_IMAGES__/touxiang.png"></a><span>飞翔的小泥鳅~</span><a href="javascript:;" class="jiagz">2016-10-26</a></div>
      </li>
      <li>
        <div class="pro-upuser zanle"><a href="#"><img src="__HOME_IMAGES__/touxiang.png"></a><span>飞翔的小泥鳅~</span><a href="javascript:;" class="jiagz">2016-10-26</a></div>
      </li>
      <li>
        <div class="pro-upuser zanle"><a href="#"><img src="__HOME_IMAGES__/touxiang.png"></a><span>飞翔的小泥鳅~</span><a href="javascript:;" class="jiagz">2016-10-26</a></div>
      </li>
      <li>
        <div class="pro-upuser zanle"><a href="#"><img src="__HOME_IMAGES__/touxiang.png"></a><span>飞翔的小泥鳅~</span><a href="javascript:;" class="jiagz">2016-10-26</a></div>
      </li>

    </ul>
  </div>
    <!--<div class="ft-blank"></div>
    <div class="wx-footer">
        <a href="index.html"><i class="icon iconfont">&#xe60e;</i><p>首页</p></a>
        <a href="fenlei.html"><i class="icon iconfont">&#xe616;</i><p>分类</p></a>
        <a href="wode.html" class="active"><i class="icon iconfont">&#xe609;</i><p>我</p></a>
    </div>-->
</div>

</body>
</html>
